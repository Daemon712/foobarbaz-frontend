<div class="jumbotron">
  <h1 class="display-3">Создать задачу</h1>
  <p class="lead">Создай задачу. Не хочу. Все так говорят, а ты создай задачу.</p>
</div>
<form (ngSubmit)="onSubmit()" #createChallengeForm="ngForm" novalidate>
  <tabset type="tabs" class="form-group">
    <tab heading="Параметры" class="py-3">

      <div class="form-group">
        <label class="control-label" for="name">Название</label>
        <input type="text" class="form-control"
               id="name" name="name" #name="ngModel" [(ngModel)]="model.name"
               required minlength="4" maxlength="50" pattern="[a-zA-Zа-яА-Я0-9\-._ ]+">
        <div *ngIf="name.errors && (name.dirty || name.touched)"
             class="text-danger">
          <div [hidden]="!name.errors['required']">Укажите название задачи</div>
          <div [hidden]="!name.errors['minlength']">Слишком короткое название</div>
          <div [hidden]="!name.errors['pattern']">Название содержит недопустимые символы</div>
        </div>
      </div>

      <div class="form-group">
        <label class="control-label" for="description">Описание</label>
        <textarea class="form-control"
                  id="description" name="description" #description="ngModel" [(ngModel)]="model.description"
                  required minlength="50" maxlength="500"></textarea>
        <div *ngIf="description.errors && (description.dirty || description.touched)"
             class="text-dangerl">
          <div [hidden]="!description.errors['required']">Напишите подробное описание</div>
          <div [hidden]="!description.errors['minlength']">Слишком короткое описание</div>
        </div>
      </div>

      <div class="form-group">
        <label class="control-label">Метки</label>
        <app-tag-picker [(tags)]="model.tags"></app-tag-picker>
      </div>

    </tab>
    <tab heading="Шаблон решения" (select)="openSolutionTemplate()" class="py-3">
      <ace-editor class="form-control"
                  #solutionTemplateEditor
           [(text)]="model.solutionTemplate"
      [mode]="'java'" [theme]="'dreamweaver'" [options]="options">
      </ace-editor>
    </tab>
    <tab heading="Модульный тест" (select)="openSolutionTest()" class="py-3">
      <ace-editor class="form-control"
                  #solutionTestEditor
                  [(text)]="model.solutionTest"
                  [mode]="'java'" [theme]="'dreamweaver'" [options]="options">
      </ace-editor>
    </tab>
    <tab heading="Пример решения" (select)="openSolutionExample()" class="py-3">
      <ace-editor class="form-control"
                  #solutionExampleEditor
           [(text)]="model.solutionExample"
           [mode]="'java'" [theme]="'dreamweaver'" [options]="options">
      </ace-editor>
    </tab>
    <tab heading="Результаты теста" class="py-3"
         [disabled]="!testResults" [active]="testResultsActive" (deselect)="testResultsActive = false">
      <app-test-results-table [testResults]="testResults" class="card"></app-test-results-table>
    </tab>
  </tabset>

  <div class="form-group">
    <button type="submit" class="btn btn-success"
            [disabled]="!createChallengeForm.form.valid || submitted">
      <i class="fa fa-plus"> </i>
      <span> Создать</span>
    </button>
    <button type="button" class="btn btn-primary"
            (click)="testSolution()" [disabled]="submitted">
      <i class="fa fa-play"> </i>
      <span> Протестировать</span>
    </button>
  </div>
</form>
